#!/usr/bin/env ruby

$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
require 'css_pal'

mode, param = ARGV

if mode.nil? || param.nil?
  puts "Correct format css_pal <mode> <value>"
  exit 1
end

MATCHER = /(\d*[\.,]?\d*)(.*)/
val, unit = param.match(MATCHER)[1..2]

begin
  action = "#{unit}_#{mode}"
  value  = val.to_f
  puts UnitConverter.send(action, value)
rescue Exception => e
  puts e.message
  exit 1
end
